{% extends "default_layout.html" %}

{% block js %}
<script type="text/javascript" src="{{ STATIC_URL }}js/homeroom.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/schools/classroom.js"></script>
{% endblock %}

{% block content %}

{% if messages %}
    <div class="alert alert-success">
        {% for msg in messages %}
            {{ msg }}
        {% endfor %}
    </div>
{% endif %}

<!-- Invite Users Modal -->
<div class="modal hide" id="inviteUsers">
	<div class="modal-header">
		<a class="close" data-dismiss="modal">Ã—</a>
		<h3>Invite Users to Math101</h3>
	</div>

	<div class="modal-body">
		<h6>Share this URL to invite users to your Class:</h6>
		<p>			 
			<span id="#invite-url">http://knetwork.org/invite#2342</span>
			(<a href=#copy-to-clipboard> Copy URL </a>)
		</p>
	
		<!-- TO-DO: notify K Network Users internally and via E-Mail
		<div class="well">
			<h4>Invite K Network Users</h4>
		</div>
	
		<div class="well">
			<h4>Let us e-mail invites for you!</h4>
		</div>
		-->
	</div>

	<div class="modal-footer">
		<a href="#" data-dismiss="modal" class="btn">Close</a>
	</div>
</div>

<!-- Bread Crumb Navigation -->
<section id="breadcrumbs">
	<div id="breadcrumbs span12">
		<ul class="breadcrumb">
			<li>
				<a href="#"><i class="icon-home"></i> Homeroom</a>
			</li>
		</ul>
	</div>
</section>

<section id="school">
	
	<h3>My School: <small>{{ main_school }}</small></h3> 
	
	<div class="school-actions">

		<div id="new-user-prompt" class="alert alert-info">
			<div class="row">
				<div class="span12">
					<a href="/schools/{{ main_school.id }}/create_a_class">Create a Class</a> and invite users {% if classes %}, or request to join a class listed below {% endif %} to get started
				</div>
			</div>
		</div>
		
		<div id="create-class-button" class="btn btn-primary pull-left">Create Class</div>

		<div class="span2">
			<div id="class-filter">
				<form class="form-vertical pull-left">
					<fieldset>
						<div class="control-group"> 
							<div class="controls">
								<select id="class-filter" class="span3">	
									<option>Show All Classes</option>
									<option>Show My Classes</option>
								</select>
							</div>
						</div>
					</fieldset>
				</form>
			</div>
		</div>
	</div>


	<div id="class-list">
		<div class="row">
			<div class="span12">
				<table class="table table-striped table-condensed">
					<thead>
						<tr>
							<th>Class Name</th>
							<th>Info</th>
							<th>Actions</th>	
							<th></th>
						</tr>
					</thead>
			
					<tbody>
				
						{% for classroom in main_school.classrooms.all %}
						<tr>
							<td><a href='/schools/{{main_school.id}}/{{ classroom.id }}'><i class="icon-book"></i> {{classroom}}</a></td>
							<td><a href=#Users><i class="icon-user"></i> {{classroom.user_set.all.count}} Users</a></td>
							<td><a 
									href="#inviteUsers" data-toggle="modal"><i class="icon-plus-sign"></i> Invite Users</a></td>
							<td><a href=#Pending-Invites>{{ classroom.invitations.count }} Pending Invites</a></td>
						</tr>
						{% endfor %}
						<!-- Save this inline for reference for now -->
						<tr>
							<td><href=#Class><i class="icon-book"></i> Math 102</a></td>
							<td><a href="#users" 
									rel="users"
									data-original-title="Users in this Class" 
									data-content="hello"
									data-placement="left">
									<i class="icon-user"></i> 2 Users</a>
							</td>

							<td><a href="#inviteUsers" 
									data-toggle="modal">
									<i class="icon-plus-sign"></i> Invite Users
								</a>
							</td>
							<td></td>
						</tr>
						
						<form>	
							<tr>
								<td>
									<i class="icon-book"></i>
									<input type="text" placeholder="Class Name">
										<div class="btn btn-danger">Cancel</div>
										<div class="btn btn-success">Confirm</div>
										<href=#Class>
									</input></td>
								<td></td>
								<td></td>
								<td></td>
							</tr>	
						</form>	
					</table>
		</div>
	</div>	
</section>

{% endblock %}
